(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[725],{6719:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/palettelist",function(){return n(5198)}])},3991:function(e,t){"use strict";var n,o;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{PrefetchKind:function(){return n},ACTION_REFRESH:function(){return l},ACTION_NAVIGATE:function(){return a},ACTION_RESTORE:function(){return r},ACTION_SERVER_PATCH:function(){return s},ACTION_PREFETCH:function(){return c},ACTION_FAST_REFRESH:function(){return i},ACTION_SERVER_ACTION:function(){return u}});let l="refresh",a="navigate",r="restore",s="server-patch",c="prefetch",i="fast-refresh",u="server-action";(o=n||(n={})).AUTO="auto",o.FULL="full",o.TEMPORARY="temporary",("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1516:function(e,t,n){"use strict";function o(e,t,n,o){return!1}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getDomainLocale",{enumerable:!0,get:function(){return o}}),n(2387),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},5569:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return x}});let o=n(8754),l=o._(n(7294)),a=n(4532),r=n(3353),s=n(1410),c=n(9064),i=n(370),u=n(9955),d=n(4224),f=n(508),p=n(1516),h=n(4266),_=n(3991),m=new Set;function b(e,t,n,o,l,a){if(!a&&!(0,r.isLocalURL)(t))return;if(!o.bypassPrefetchedCheck){let l=void 0!==o.locale?o.locale:"locale"in e?e.locale:void 0,a=t+"%"+n+"%"+l;if(m.has(a))return;m.add(a)}let s=a?e.prefetch(t,l):e.prefetch(t,n,o);Promise.resolve(s).catch(e=>{})}function v(e){return"string"==typeof e?e:(0,s.formatUrl)(e)}let y=l.default.forwardRef(function(e,t){let n,o;let{href:s,as:m,children:y,prefetch:x=null,passHref:C,replace:g,shallow:j,scroll:E,locale:k,onClick:T,onMouseEnter:N,onTouchStart:O,legacyBehavior:F=!1,...M}=e;n=y,F&&("string"==typeof n||"number"==typeof n)&&(n=l.default.createElement("a",null,n));let w=l.default.useContext(u.RouterContext),I=l.default.useContext(d.AppRouterContext),P=null!=w?w:I,A=!w,S=!1!==x,$=null===x?_.PrefetchKind.AUTO:_.PrefetchKind.FULL,{href:R,as:L}=l.default.useMemo(()=>{if(!w){let e=v(s);return{href:e,as:m?v(m):e}}let[e,t]=(0,a.resolveHref)(w,s,!0);return{href:e,as:m?(0,a.resolveHref)(w,m):t||e}},[w,s,m]),D=l.default.useRef(R),G=l.default.useRef(L);F&&(o=l.default.Children.only(n));let H=F?o&&"object"==typeof o&&o.ref:t,[B,K,U]=(0,f.useIntersection)({rootMargin:"200px"}),q=l.default.useCallback(e=>{(G.current!==L||D.current!==R)&&(U(),G.current=L,D.current=R),B(e),H&&("function"==typeof H?H(e):"object"==typeof H&&(H.current=e))},[L,H,R,U,B]);l.default.useEffect(()=>{P&&K&&S&&b(P,R,L,{locale:k},{kind:$},A)},[L,R,K,k,S,null==w?void 0:w.locale,P,A,$]);let X={ref:q,onClick(e){F||"function"!=typeof T||T(e),F&&o.props&&"function"==typeof o.props.onClick&&o.props.onClick(e),P&&!e.defaultPrevented&&function(e,t,n,o,a,s,c,i,u,d){let{nodeName:f}=e.currentTarget,p="A"===f.toUpperCase();if(p&&(function(e){let t=e.currentTarget,n=t.getAttribute("target");return n&&"_self"!==n||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)||!u&&!(0,r.isLocalURL)(n)))return;e.preventDefault();let h=()=>{let e=null==c||c;"beforePopState"in t?t[a?"replace":"push"](n,o,{shallow:s,locale:i,scroll:e}):t[a?"replace":"push"](o||n,{forceOptimisticNavigation:!d,scroll:e})};u?l.default.startTransition(h):h()}(e,P,R,L,g,j,E,k,A,S)},onMouseEnter(e){F||"function"!=typeof N||N(e),F&&o.props&&"function"==typeof o.props.onMouseEnter&&o.props.onMouseEnter(e),P&&(S||!A)&&b(P,R,L,{locale:k,priority:!0,bypassPrefetchedCheck:!0},{kind:$},A)},onTouchStart(e){F||"function"!=typeof O||O(e),F&&o.props&&"function"==typeof o.props.onTouchStart&&o.props.onTouchStart(e),P&&(S||!A)&&b(P,R,L,{locale:k,priority:!0,bypassPrefetchedCheck:!0},{kind:$},A)}};if((0,c.isAbsoluteUrl)(L))X.href=L;else if(!F||C||"a"===o.type&&!("href"in o.props)){let e=void 0!==k?k:null==w?void 0:w.locale,t=(null==w?void 0:w.isLocaleDomain)&&(0,p.getDomainLocale)(L,e,null==w?void 0:w.locales,null==w?void 0:w.domainLocales);X.href=t||(0,h.addBasePath)((0,i.addLocale)(L,e,null==w?void 0:w.defaultLocale))}return F?l.default.cloneElement(o,X):l.default.createElement("a",{...M,...X},n)}),x=y;("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},508:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useIntersection",{enumerable:!0,get:function(){return c}});let o=n(7294),l=n(29),a="function"==typeof IntersectionObserver,r=new Map,s=[];function c(e){let{rootRef:t,rootMargin:n,disabled:c}=e,i=c||!a,[u,d]=(0,o.useState)(!1),f=(0,o.useRef)(null),p=(0,o.useCallback)(e=>{f.current=e},[]);(0,o.useEffect)(()=>{if(a){if(i||u)return;let e=f.current;if(e&&e.tagName){let o=function(e,t,n){let{id:o,observer:l,elements:a}=function(e){let t;let n={root:e.root||null,margin:e.rootMargin||""},o=s.find(e=>e.root===n.root&&e.margin===n.margin);if(o&&(t=r.get(o)))return t;let l=new Map,a=new IntersectionObserver(e=>{e.forEach(e=>{let t=l.get(e.target),n=e.isIntersecting||e.intersectionRatio>0;t&&n&&t(n)})},e);return t={id:n,observer:a,elements:l},s.push(n),r.set(n,t),t}(n);return a.set(e,t),l.observe(e),function(){if(a.delete(e),l.unobserve(e),0===a.size){l.disconnect(),r.delete(o);let e=s.findIndex(e=>e.root===o.root&&e.margin===o.margin);e>-1&&s.splice(e,1)}}}(e,e=>e&&d(e),{root:null==t?void 0:t.current,rootMargin:n});return o}}else if(!u){let e=(0,l.requestIdleCallback)(()=>d(!0));return()=>(0,l.cancelIdleCallback)(e)}},[i,n,t,u,f.current]);let h=(0,o.useCallback)(()=>{d(!1)},[]);return[p,u,h]}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},5198:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var o=n(5893),l=n(7294),a=n(4593),r=n(1664),s=n.n(r),c=n(1014),i=n.n(c),u=()=>{var e;let[t,n]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{let e=()=>{n(window.scrollY>50)};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[]),(0,o.jsxs)("header",{className:"".concat(i().header," ").concat(t?i().scrolled:""),children:[(0,o.jsx)("span",{className:i().revealingText,children:"感情カラーパレット"}),(0,o.jsx)(s(),{href:{pathname:"/",hash:null==e?void 0:e.hash},children:(0,o.jsx)("span",{children:"作成する"})})]})};let d={赤:"#FF0000",橙:"#FFA500",黄:"#FFFF00",緑:"#008000",水色:"#00FFFF",青:"#0000FF",紫:"#800080",ピンク:"#FFC0CB",茶:"#A52A2A",白:"#FFFFFF",黒:"#000000"};var f=n(9250),p=n.n(f),h=e=>{let{selectedNumbers:t,selectedColors:n,handleNumberChange:l,colorRanges:a,handleColorChange:r,handleFetch:s,currentCount:c}=e;return(0,o.jsxs)("div",{className:p().leftsidebar,children:[(0,o.jsxs)("div",{className:p().targetCount,children:[(0,o.jsx)("span",{children:"対象パレット"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:p().currentCount,children:c}),(0,o.jsx)("span",{className:p().countLabel,children:"件"})]})]}),(0,o.jsxs)("div",{className:p().paletteNumbers,children:[(0,o.jsx)("div",{className:p().subtitle,children:"パレット数"}),[4,5,6].map(e=>(0,o.jsxs)("label",{className:p().option,children:[" ",(0,o.jsx)("input",{id:"num-".concat(e),type:"checkbox",checked:t.includes(e),onChange:()=>l(e)}),e,"色"]},e))]}),(0,o.jsxs)("div",{className:p().paletteColors,children:[(0,o.jsx)("div",{className:p().subtitle,children:"カラー"}),Object.keys(a).map(e=>(0,o.jsxs)("label",{className:p().option,children:[(0,o.jsx)("input",{id:"color-".concat(e),type:"checkbox",checked:n.includes(e),onChange:()=>r(e)}),(0,o.jsx)("span",{className:p().colorDisplay,style:{backgroundColor:d[e]}}),(0,o.jsx)("span",{children:e})]},e))]}),(0,o.jsx)("button",{className:p().fetchbutton,onClick:s,children:"パレットを取得"})]})},_=e=>{let{palettes:t,getTextColor:n,handleColorBoxClick:l,setHoveredColor:a,copiedColor:r,hoveredColor:s,handleLikeClick:c,timeSince:i}=e;return(0,o.jsx)("div",{className:p().mainContent,children:t.map(e=>(0,o.jsxs)("div",{className:p().paletteItem,children:[(0,o.jsx)("div",{className:p().colorBox,children:e.color.map((t,c)=>(0,o.jsx)("div",{className:p().color,style:{background:t,color:n(t)},onClick:()=>l(t,e.id),onMouseEnter:()=>a({color:t,paletteId:e.id}),onMouseLeave:()=>a(null),children:(null==r?void 0:r.color)===t&&(null==r?void 0:r.paletteId)===e.id?"✔":(null==s?void 0:s.color)===t&&(null==s?void 0:s.paletteId)===e.id?t:""},c))}),(0,o.jsx)("h3",{children:e.text}),(0,o.jsxs)("div",{className:p().info,children:[(0,o.jsx)("div",{className:p().likeContainer,children:(0,o.jsxs)("span",{onClick:()=>c(e),children:["❤️ ",e.like]})}),(0,o.jsx)("div",{className:p().timeContainer,children:i(new Date(e.createdAt))})]})]},e.id))})},m=n(9777);let b=()=>{let[e,t]=(0,l.useState)([]),[n,o]=(0,l.useState)([4,5,6]),[a,r]=(0,l.useState)([]),[s,c]=(0,l.useState)(0),i=(0,l.useMemo)(()=>({赤:{hue:[330,30],saturation:[33,100],value:[33,100]},橙:{hue:[0,60],saturation:[33,100],value:[33,100]},黄:{hue:[45,75],saturation:[33,100],value:[33,100]},緑:{hue:[75,165],saturation:[33,100],value:[33,100]},水色:{hue:[165,195],saturation:[33,100],value:[33,100]},青:{hue:[195,255],saturation:[33,100],value:[33,100]},紫:{hue:[250,290],saturation:[33,100],value:[33,100]},ピンク:{hue:[285,315],saturation:[33,100],value:[33,100]},茶:{hue:[0,30],saturation:[33,66],value:[33,66]},黒:{hue:[330,360],saturation:[0,100],value:[0,33]},白:{hue:[0,360],saturation:[0,33],value:[66,100]}}),[]),u=(0,l.useCallback)(async(e,t)=>{console.log(t);let o=await m.x.item.$post({body:{type:t,numberlist:n,colorlist:e}});return Array.isArray(o)?r(o):r([]),o},[n]),[d,f]=(0,l.useState)([]),[p,h]=(0,l.useState)("with"),_=(0,l.useMemo)(()=>e.map(e=>i[e]),[e,i]),b=(e,t,n)=>{let o=e/255,l=t/255,a=n/255,r=Math.max(o,l,a),s=Math.min(o,l,a),c=0,i=r-s;if(r!==s){switch(r){case o:c=(l-a)/i+(l<a?6:0);break;case l:c=(a-o)/i+2;break;case a:c=(o-l)/i+4}c/=6}return{h:360*c,s:100*(0===r?0:i/r),v:100*r}},v=e=>{let t=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),o=parseInt(e.slice(5,7),16);return b(t,n,o)},y=async e=>{let t=e.like+1,n=e.color.map(e=>v(e));await m.x.like.$post({body:{id:e.id,text:e.text,paletteSize:e.paletteSize,color:n,like:t}}),r(n=>n.map(n=>n.id===e.id?{...n,like:t}:n))},[x,C]=(0,l.useState)(null),[g,j]=(0,l.useState)(null),E=e=>{let t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("Copy"),t.remove()};return{selectedColors:e,selectedNumbers:n,palettes:a,setPalettes:r,currentCount:s,setCurrentCount:c,colorRanges:i,fetchPalettes:u,handleColorChange:e=>{t(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},handleNumberChange:e=>{o(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},handleFetch:()=>{let t=n.length>0,o=e.length>0;u(_,t&&o?"with":t?"number":"color")},rangesToSend:d,currentType:p,handleLikeClick:y,timeSince:e=>{let t=new Date,n=(t.getTime()-e.getTime())/1e3;if(n<60)return"Just now";if(n<3600)return"".concat(Math.round(n/60)," minutes ago");if(n<=86400)return"Today";let o=Math.round(n/86400);if(1===o)return"1 day ago";if(o<30)return"".concat(o," days ago");let l=Math.round(o/30);if(1===l)return"1 month ago";if(l<12)return"".concat(l," months ago");let a=Math.round(l/12);return 1===a?"1 year ago":"".concat(a," years ago")},getTextColor:e=>{let t=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),o=parseInt(e.slice(5,7),16),l=(.299*t+.587*n+.114*o)/255;return l>.7?"#000":l>.4?"#777":"#fff"},copiedColor:x,hoveredColor:g,setHoveredColor:j,handleColorBoxClick:(e,t)=>{E(e),C({color:e,paletteId:t}),setTimeout(()=>{C(null)},3e3)},rangesToSendcolorKey:_}};var v=()=>{let{selectedColors:e,selectedNumbers:t,palettes:n,currentCount:r,setCurrentCount:s,colorRanges:c,fetchPalettes:i,handleColorChange:d,handleNumberChange:f,handleFetch:m,handleLikeClick:v,timeSince:y,getTextColor:x,copiedColor:C,hoveredColor:g,setHoveredColor:j,handleColorBoxClick:E,rangesToSendcolorKey:k}=b();return(0,l.useEffect)(()=>{i(k,"number")},[i,k]),(0,l.useEffect)(()=>{let e=Date.now(),t=()=>{let o=Date.now(),l=o-e;l>2e3&&(l=2e3);let a=l/2e3;s(Math.round(a*n.length)),l<2e3&&requestAnimationFrame(t)};t()},[n.length,s]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(a.q,{children:[(0,o.jsx)("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),(0,o.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"}),(0,o.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Noto+Sans+JP:wght@100&display=swap",rel:"stylesheet"})]}),(0,o.jsxs)("div",{className:p().container,children:[(0,o.jsx)(u,{}),(0,o.jsx)(h,{selectedNumbers:t,selectedColors:e,handleNumberChange:f,colorRanges:c,handleColorChange:d,handleFetch:m,currentCount:r}),(0,o.jsx)(_,{palettes:n,getTextColor:x,handleColorBoxClick:E,setHoveredColor:j,copiedColor:C,hoveredColor:g,handleLikeClick:v,timeSince:y})]})]})}},9777:function(e,t,n){"use strict";n.d(t,{x:function(){return r}});var o=n(9239),l=n(7080),a=n(6154);let r=(e=>{let{baseURL:t,fetch:n}=e,o=(void 0===t?"":t).replace(/\/$/,""),a="/color",r="/health",s="/item",c="/like",i="/session",u="/tasks",d="POST",f="DELETE",p="PATCH";return{color:{post:e=>n(o,a,d,e).json(),$post:e=>n(o,a,d,e).json().then(e=>e.body),$path:()=>"".concat(o).concat(a)},health:{get:e=>n(o,r,"GET",e).json(),$get:e=>n(o,r,"GET",e).json().then(e=>e.body),$path:()=>"".concat(o).concat(r)},item:{get:e=>n(o,s,"GET",e).text(),$get:e=>n(o,s,"GET",e).text().then(e=>e.body),post:e=>n(o,s,d,e).json(),$post:e=>n(o,s,d,e).json().then(e=>e.body),$path:()=>"".concat(o).concat(s)},like:{get:e=>n(o,c,"GET",e).text(),$get:e=>n(o,c,"GET",e).text().then(e=>e.body),post:e=>n(o,c,d,e).send(),$post:e=>n(o,c,d,e).send().then(e=>e.body),$path:()=>"".concat(o).concat(c)},me:{get:e=>n(o,"/me","GET",e).json(),$get:e=>n(o,"/me","GET",e).json().then(e=>e.body),$path:()=>"".concat(o).concat("/me")},session:{post:e=>n(o,i,d,e).json(),$post:e=>n(o,i,d,e).json().then(e=>e.body),delete:e=>n(o,i,f,e).json(),$delete:e=>n(o,i,f,e).json().then(e=>e.body),$path:()=>"".concat(o).concat(i)},tasks:{_taskId:e=>{let t="".concat(u,"/").concat(e);return{patch:e=>n(o,t,p,e).send(),$patch:e=>n(o,t,p,e).send().then(e=>e.body),delete:e=>n(o,t,f,e).send(),$delete:e=>n(o,t,f,e).send().then(e=>e.body),$path:()=>"".concat(o).concat(t)}},get:e=>n(o,u,"GET",e).json(),$get:e=>n(o,u,"GET",e).json().then(e=>e.body),post:e=>n(o,u,d,e).json(),$post:e=>n(o,u,d,e).json().then(e=>e.body),$path:e=>"".concat(o).concat(u).concat(e&&e.query?"?".concat((0,l._K)(e.query)):"")},get:e=>n(o,"","GET",e).text(),$get:e=>n(o,"","GET",e).text().then(e=>e.body),$path:()=>"".concat(o)}})((0,o.Z)(a.Z.create({withCredentials:!0})))},1014:function(e){e.exports={header:"Header_header__AF_3G",scrolled:"Header_scrolled__Ik5rI",revealingText:"Header_revealingText__kBRij","reveal-text":"Header_reveal-text__4hOe5"}},9250:function(e){e.exports={container:"palettelist_container__Tn3C8",leftsidebar:"palettelist_leftsidebar___xxDc",targetCount:"palettelist_targetCount__DcHXc",currentCount:"palettelist_currentCount__kNiQo",countLabel:"palettelist_countLabel__JN_nf",paletteNumbers:"palettelist_paletteNumbers__PC0wM",paletteColors:"palettelist_paletteColors__lpWYU",option:"palettelist_option__hf_Xw",colorDisplay:"palettelist_colorDisplay__bc9aK",subtitle:"palettelist_subtitle__avShf",fetchbutton:"palettelist_fetchbutton__FLpb3",mainContent:"palettelist_mainContent__XBRCW",paletteItem:"palettelist_paletteItem__MYKCu",colorBox:"palettelist_colorBox__Z8WIE",color:"palettelist_color__6F_4s",info:"palettelist_info__SdVEs",likeContainer:"palettelist_likeContainer__Bmjrj",timeContainer:"palettelist_timeContainer__l6HAW"}},1664:function(e,t,n){e.exports=n(5569)}},function(e){e.O(0,[535,774,888,179],function(){return e(e.s=6719)}),_N_E=e.O()}]);