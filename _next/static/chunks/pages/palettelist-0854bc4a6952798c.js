(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[725],{6719:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/palettelist",function(){return n(7961)}])},7961:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var l=n(5893),o=n(7294),s=n(4593),a=n(9250),r=n.n(a),c=e=>{let{selectedNumbers:t,selectedColors:n,handleNumberChange:s,colorRanges:a,handleColorChange:c,handleFetch:i,currentCount:u}=e,d=(0,o.useRef)(null),h=(0,o.useRef)(!1),p=(0,o.useRef)(null),m=(0,o.useRef)(null);return(0,o.useEffect)(()=>{let e=()=>{if(null===d.current)return;let e=d.current.getBoundingClientRect();null===p.current&&(console.log("aaaa"),p.current=e.top);let t=window.scrollY;console.log("rect.top:",e.top),console.log("window.innerHeight:",window.innerHeight),console.log("isFixed:",h.current),t>(null!==m.current?m.current:0)?(console.log("bbbb"),e.bottom<=window.innerHeight&&!h.current&&(console.log("cccc"),d.current.style.position="fixed",d.current.style.bottom="0px",d.current.style.left="5%",h.current=!0)):t<(null!==m.current?m.current:0)&&(console.log("xxxx"),e.top>=0&&!h.current&&(console.log("yyyy"),d.current.style.position="fixed",d.current.style.top="0px",d.current.style.left="5%",h.current=!0)),m.current=t};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[]),(0,l.jsxs)("div",{className:r().leftsidebar,ref:d,children:[(0,l.jsxs)("div",{className:r().targetCount,children:[(0,l.jsx)("span",{children:"対象パレット"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:r().currentCount,children:u}),(0,l.jsx)("span",{className:r().countLabel,children:"件"})]})]}),(0,l.jsxs)("div",{className:r().paletteNumbers,children:[(0,l.jsx)("div",{className:r().subtitle,children:"パレット数"}),[4,5,6].map(e=>(0,l.jsxs)("div",{className:r().option,children:[(0,l.jsx)("input",{type:"checkbox",checked:t.includes(e),onChange:()=>s(e)}),(0,l.jsxs)("label",{children:[e,"色"]})]},e))]}),(0,l.jsxs)("div",{className:r().paletteColors,children:[(0,l.jsx)("div",{className:r().subtitle,children:"カラー"}),Object.keys(a).map(e=>(0,l.jsxs)("div",{className:r().option,children:[(0,l.jsx)("input",{type:"checkbox",checked:n.includes(e),onChange:()=>c(e)}),(0,l.jsx)("span",{className:r().colorDisplay,style:{backgroundColor:e}}),(0,l.jsx)("label",{children:e})]},e))]}),(0,l.jsx)("button",{className:r().fetchbutton,onClick:i,children:"パレットを取得"})]})},i=e=>{let{palettes:t,getTextColor:n,handleColorBoxClick:o,setHoveredColor:s,copiedColor:a,hoveredColor:c,handleLikeClick:i,timeSince:u}=e;return(0,l.jsx)("div",{className:r().mainContent,children:t.map(e=>(0,l.jsxs)("div",{className:r().paletteItem,children:[(0,l.jsx)("div",{className:r().colorBox,children:e.color.map((t,i)=>(0,l.jsx)("div",{className:r().color,style:{background:t,color:n(t)},onClick:()=>o(t,e.id),onMouseEnter:()=>s({color:t,paletteId:e.id}),onMouseLeave:()=>s(null),children:(null==a?void 0:a.color)===t&&(null==a?void 0:a.paletteId)===e.id?"✔":(null==c?void 0:c.color)===t&&(null==c?void 0:c.paletteId)===e.id?t:""},i))}),(0,l.jsx)("h3",{children:e.text}),(0,l.jsxs)("div",{className:r().info,children:[(0,l.jsx)("div",{children:(0,l.jsxs)("span",{onClick:()=>i(e),children:["❤️ ",e.like]})}),(0,l.jsx)("div",{children:u(new Date(e.createdAt))})]})]},e.id))})},u=n(9777);let d=()=>{let[e,t]=(0,o.useState)([]),[n,l]=(0,o.useState)([4,5,6]),[s,a]=(0,o.useState)([]),[r,c]=(0,o.useState)(0),i=(0,o.useMemo)(()=>({赤:{hue:[330,30],saturation:[33,100],value:[33,100]},橙:{hue:[0,60],saturation:[33,100],value:[33,100]},黄:{hue:[45,75],saturation:[33,100],value:[33,100]},緑:{hue:[75,165],saturation:[33,100],value:[33,100]},水色:{hue:[165,195],saturation:[33,100],value:[33,100]},青:{hue:[195,255],saturation:[33,100],value:[33,100]},紫:{hue:[250,290],saturation:[33,100],value:[33,100]},ピンク:{hue:[285,315],saturation:[33,100],value:[33,100]},茶:{hue:[0,30],saturation:[33,66],value:[33,66]},黒:{hue:[330,360],saturation:[0,100],value:[0,33]},白:{hue:[0,360],saturation:[0,33],value:[66,100]}}),[]),d=(0,o.useCallback)(async(e,t)=>{console.log(t);let l=await u.x.item.$post({body:{type:t,numberlist:n,colorlist:e}});return Array.isArray(l)?a(l):a([]),l},[n]),[h,p]=(0,o.useState)([]),[m,x]=(0,o.useState)("with"),_=(0,o.useMemo)(()=>e.map(e=>i[e]),[e,i]),g=(e,t,n)=>{let l=e/255,o=t/255,s=n/255,a=Math.max(l,o,s),r=Math.min(l,o,s),c=0,i=a-r;if(a!==r){switch(a){case l:c=(o-s)/i+(o<s?6:0);break;case o:c=(s-l)/i+2;break;case s:c=(l-o)/i+4}c/=6}return{h:360*c,s:100*(0===a?0:i/a),v:100*a}},f=e=>{let t=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),l=parseInt(e.slice(5,7),16);return g(t,n,l)},b=async e=>{let t=e.like+1,n=e.color.map(e=>f(e));await u.x.like.$post({body:{id:e.id,text:e.text,paletteSize:e.paletteSize,color:n,like:t}}),a(n=>n.map(n=>n.id===e.id?{...n,like:t}:n))},[j,y]=(0,o.useState)(null),[C,v]=(0,o.useState)(null),k=e=>{let t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("Copy"),t.remove()};return{selectedColors:e,selectedNumbers:n,palettes:s,setPalettes:a,currentCount:r,setCurrentCount:c,colorRanges:i,fetchPalettes:d,handleColorChange:e=>{t(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},handleNumberChange:e=>{l(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},handleFetch:()=>{let t=n.length>0,l=e.length>0;d(_,t&&l?"with":t?"number":"color")},rangesToSend:h,currentType:m,handleLikeClick:b,timeSince:e=>{let t=new Date,n=(t.getTime()-e.getTime())/1e3;if(n<60)return"Just now";if(n<3600)return"".concat(Math.round(n/60)," minutes ago");if(n<=86400)return"Today";let l=Math.round(n/86400);if(1===l)return"1 day ago";if(l<30)return"".concat(l," days ago");let o=Math.round(l/30);if(1===o)return"1 month ago";if(o<12)return"".concat(o," months ago");let s=Math.round(o/12);return 1===s?"1 year ago":"".concat(s," years ago")},getTextColor:e=>{let t=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),l=parseInt(e.slice(5,7),16),o=(.299*t+.587*n+.114*l)/255;return o>.7?"#000":o>.4?"#777":"#fff"},copiedColor:j,hoveredColor:C,setHoveredColor:v,handleColorBoxClick:(e,t)=>{k(e),y({color:e,paletteId:t}),setTimeout(()=>{y(null)},3e3)},rangesToSendcolorKey:_}};var h=()=>{let{selectedColors:e,selectedNumbers:t,palettes:n,currentCount:a,setCurrentCount:u,colorRanges:h,fetchPalettes:p,handleColorChange:m,handleNumberChange:x,handleFetch:_,handleLikeClick:g,timeSince:f,getTextColor:b,copiedColor:j,hoveredColor:y,setHoveredColor:C,handleColorBoxClick:v,rangesToSendcolorKey:k}=d();return(0,o.useEffect)(()=>{p(k,"number")},[p,k]),(0,o.useEffect)(()=>{let e=Date.now(),t=()=>{let l=Date.now(),o=l-e;o>2e3&&(o=2e3);let s=o/2e3;u(Math.round(s*n.length)),o<2e3&&requestAnimationFrame(t)};t()},[n.length,u]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(s.q,{children:[(0,l.jsx)("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),(0,l.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"}),(0,l.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Noto+Sans+JP:wght@100&display=swap",rel:"stylesheet"})]}),(0,l.jsxs)("div",{className:r().container,children:[(0,l.jsx)(c,{selectedNumbers:t,selectedColors:e,handleNumberChange:x,colorRanges:h,handleColorChange:m,handleFetch:_,currentCount:a}),(0,l.jsx)(i,{palettes:n,getTextColor:b,handleColorBoxClick:v,setHoveredColor:C,copiedColor:j,hoveredColor:y,handleLikeClick:g,timeSince:f})]})]})}},9777:function(e,t,n){"use strict";n.d(t,{x:function(){return a}});var l=n(9239),o=n(7080),s=n(6154);let a=(e=>{let{baseURL:t,fetch:n}=e,l=(void 0===t?"":t).replace(/\/$/,""),s="/color",a="/health",r="/item",c="/like",i="/session",u="/tasks",d="POST",h="DELETE",p="PATCH";return{color:{post:e=>n(l,s,d,e).json(),$post:e=>n(l,s,d,e).json().then(e=>e.body),$path:()=>"".concat(l).concat(s)},health:{get:e=>n(l,a,"GET",e).json(),$get:e=>n(l,a,"GET",e).json().then(e=>e.body),$path:()=>"".concat(l).concat(a)},item:{get:e=>n(l,r,"GET",e).text(),$get:e=>n(l,r,"GET",e).text().then(e=>e.body),post:e=>n(l,r,d,e).json(),$post:e=>n(l,r,d,e).json().then(e=>e.body),$path:()=>"".concat(l).concat(r)},like:{get:e=>n(l,c,"GET",e).text(),$get:e=>n(l,c,"GET",e).text().then(e=>e.body),post:e=>n(l,c,d,e).send(),$post:e=>n(l,c,d,e).send().then(e=>e.body),$path:()=>"".concat(l).concat(c)},me:{get:e=>n(l,"/me","GET",e).json(),$get:e=>n(l,"/me","GET",e).json().then(e=>e.body),$path:()=>"".concat(l).concat("/me")},session:{post:e=>n(l,i,d,e).json(),$post:e=>n(l,i,d,e).json().then(e=>e.body),delete:e=>n(l,i,h,e).json(),$delete:e=>n(l,i,h,e).json().then(e=>e.body),$path:()=>"".concat(l).concat(i)},tasks:{_taskId:e=>{let t="".concat(u,"/").concat(e);return{patch:e=>n(l,t,p,e).send(),$patch:e=>n(l,t,p,e).send().then(e=>e.body),delete:e=>n(l,t,h,e).send(),$delete:e=>n(l,t,h,e).send().then(e=>e.body),$path:()=>"".concat(l).concat(t)}},get:e=>n(l,u,"GET",e).json(),$get:e=>n(l,u,"GET",e).json().then(e=>e.body),post:e=>n(l,u,d,e).json(),$post:e=>n(l,u,d,e).json().then(e=>e.body),$path:e=>"".concat(l).concat(u).concat(e&&e.query?"?".concat((0,o._K)(e.query)):"")},get:e=>n(l,"","GET",e).text(),$get:e=>n(l,"","GET",e).text().then(e=>e.body),$path:()=>"".concat(l)}})((0,l.Z)(s.Z.create({withCredentials:!0})))},9250:function(e){e.exports={container:"palettelist_container__Tn3C8",leftsidebar:"palettelist_leftsidebar___xxDc",targetCount:"palettelist_targetCount__DcHXc",currentCount:"palettelist_currentCount__kNiQo",countLabel:"palettelist_countLabel__JN_nf",paletteNumbers:"palettelist_paletteNumbers__PC0wM",paletteColors:"palettelist_paletteColors__lpWYU",option:"palettelist_option__hf_Xw",colorDisplay:"palettelist_colorDisplay__bc9aK",subtitle:"palettelist_subtitle__avShf",fetchbutton:"palettelist_fetchbutton__FLpb3",mainContent:"palettelist_mainContent__XBRCW",paletteItem:"palettelist_paletteItem__MYKCu",colorBox:"palettelist_colorBox__Z8WIE",color:"palettelist_color__6F_4s",info:"palettelist_info__SdVEs"}}},function(e){e.O(0,[535,774,888,179],function(){return e(e.s=6719)}),_N_E=e.O()}]);