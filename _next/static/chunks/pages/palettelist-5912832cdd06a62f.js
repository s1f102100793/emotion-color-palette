(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[725],{6719:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/palettelist",function(){return n(8312)}])},8312:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var a=n(5893),l=n(7294),s=n(4593),o=n(1664),r=n.n(o),i=n(1733),c=n(1014),u=n.n(c),d=()=>{let[e,t]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{let e=()=>{t(window.scrollY>50)};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[]),(0,a.jsxs)("header",{className:"".concat(u().header," ").concat(e?u().scrolled:""),children:[(0,a.jsx)("span",{className:u().revealingText,children:"感情カラーパレット"}),(0,a.jsx)(r(),{href:i.V.$url(),children:(0,a.jsx)("span",{children:"作成する"})})]})};let h={赤:"#FF0000",橙:"#FFA500",黄:"#FFFF00",緑:"#008000",水色:"#00FFFF",青:"#0000FF",紫:"#800080",ピンク:"#FFC0CB",茶:"#A52A2A",白:"#FFFFFF",黒:"#000000"};var p=n(9250),m=n.n(p),_=e=>{let{selectedNumbers:t,selectedColors:n,handleNumberChange:l,colorRanges:s,handleColorChange:o,handleFetch:r,currentCount:i}=e;return(0,a.jsxs)("div",{className:m().leftsidebar,children:[(0,a.jsxs)("div",{className:m().targetCount,children:[(0,a.jsx)("span",{children:"対象パレット"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:m().currentCount,children:i}),(0,a.jsx)("span",{className:m().countLabel,children:"件"})]})]}),(0,a.jsxs)("div",{className:m().paletteNumbers,children:[(0,a.jsx)("div",{className:m().subtitle,children:"パレット数"}),[4,5,6].map(e=>(0,a.jsxs)("label",{className:m().option,children:[" ",(0,a.jsx)("input",{id:"num-".concat(e),type:"checkbox",checked:t.includes(e),onChange:()=>l(e)}),e,"色"]},e))]}),(0,a.jsxs)("div",{className:m().paletteColors,children:[(0,a.jsx)("div",{className:m().subtitle,children:"カラー"}),Object.keys(s).map(e=>(0,a.jsxs)("label",{className:m().option,children:[(0,a.jsx)("input",{id:"color-".concat(e),type:"checkbox",checked:n.includes(e),onChange:()=>o(e)}),(0,a.jsx)("span",{className:m().colorDisplay,style:{backgroundColor:h[e]}}),(0,a.jsx)("span",{children:e})]},e))]}),(0,a.jsx)("button",{className:m().fetchbutton,onClick:r,children:"パレットを取得"})]})},x=e=>{let{palettes:t,getTextColor:n,handleColorBoxClick:s,setHoveredColor:o,copiedColor:r,hoveredColor:i,handleLikeClick:c,timeSince:u}=e,[d,h]=l.useState(null),p=l.useMemo(()=>"createdAt"===d?[...t].sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()):[...t].sort((e,t)=>t.like-e.like),[t,d]);return(0,a.jsxs)("div",{className:m().mainContent,children:[(0,a.jsxs)("div",{className:m().sortButtonsContainer,children:[(0,a.jsx)("button",{className:m().whiteButton,onClick:()=>h("createdAt"),children:"新しい順"}),(0,a.jsx)("button",{className:m().whiteButton,onClick:()=>h("like"),children:"いいね順"})]}),p.map(e=>(0,a.jsxs)("div",{className:m().paletteItem,children:[(0,a.jsx)("div",{className:m().colorBox,children:e.color.map((t,l)=>(0,a.jsx)("div",{className:m().color,style:{background:t,color:n(t)},onClick:()=>s(t,e.id),onMouseEnter:()=>o({color:t,paletteId:e.id}),onMouseLeave:()=>o(null),children:(null==r?void 0:r.color)===t&&(null==r?void 0:r.paletteId)===e.id?"✔":(null==i?void 0:i.color)===t&&(null==i?void 0:i.paletteId)===e.id?t:""},l))}),(0,a.jsx)("h3",{children:e.text}),(0,a.jsxs)("div",{className:m().info,children:[(0,a.jsx)("div",{className:m().likeContainer,children:(0,a.jsxs)("span",{onClick:()=>c(e),children:["❤️ ",e.like]})}),(0,a.jsx)("div",{className:m().timeContainer,children:u(new Date(e.createdAt))})]})]},e.id))]})},j=n(9777);let C=()=>{let[e,t]=(0,l.useState)([]),[n,a]=(0,l.useState)([4,5,6]),[s,o]=(0,l.useState)([]),[r,i]=(0,l.useState)(0),c=(0,l.useMemo)(()=>({赤:[{hue:[330,360],saturation:[80,100],value:[70,100]},{hue:[0,30],saturation:[80,100],value:[70,100]}],橙:{hue:[20,50],saturation:[33,100],value:[33,100]},黄:{hue:[45,75],saturation:[33,100],value:[33,100]},緑:{hue:[75,165],saturation:[33,100],value:[33,100]},水色:{hue:[165,195],saturation:[33,100],value:[33,100]},青:{hue:[195,255],saturation:[33,100],value:[33,100]},紫:{hue:[250,290],saturation:[33,100],value:[33,100]},ピンク:{hue:[285,315],saturation:[33,100],value:[33,100]},茶:{hue:[0,30],saturation:[33,80],value:[20,70]},黒:{hue:[330,360],saturation:[0,100],value:[0,33]},白:{hue:[0,360],saturation:[0,15],value:[80,100]}}),[]),u=e=>e.reduce((e,t)=>Array.isArray(t)?e.concat(t):(e.push(t),e),[]),d=(0,l.useCallback)(async(e,t,n)=>{console.log(t);let a=await j.x.item.$post({body:{type:t,numberlist:n,colorlist:e}});return Array.isArray(a)?o(a):o([]),a},[]),[h,p]=(0,l.useState)([]),[m,_]=(0,l.useState)("with"),x=(0,l.useMemo)(()=>{let t=e.map(e=>c[e]);return u(t)},[e,c]),C=(e,t,n)=>{let a=e/255,l=t/255,s=n/255,o=Math.max(a,l,s),r=Math.min(a,l,s),i=0,c=o-r;if(o!==r){switch(o){case a:i=(l-s)/c+(l<s?6:0);break;case l:i=(s-a)/c+2;break;case s:i=(a-l)/c+4}i/=6}return{h:360*i,s:100*(0===o?0:c/o),v:100*o}},b=e=>{let t=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),a=parseInt(e.slice(5,7),16);return C(t,n,a)},f=async e=>{let t=e.like+1,n=e.color.map(e=>b(e));await j.x.like.$post({body:{id:e.id,text:e.text,paletteSize:e.paletteSize,color:n,like:t}}),o(n=>n.map(n=>n.id===e.id?{...n,like:t}:n))},[v,g]=(0,l.useState)(null),[k,y]=(0,l.useState)(null),N=e=>{let t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("Copy"),t.remove()};return{selectedColors:e,selectedNumbers:n,palettes:s,setPalettes:o,currentCount:r,setCurrentCount:i,colorRanges:c,fetchPalettes:d,handleColorChange:e=>{t(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},handleNumberChange:e=>{a(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},handleFetch:()=>{let t=n.length>0,a=e.length>0;d(x,t&&a?"with":t?"number":"color",n)},rangesToSend:h,currentType:m,handleLikeClick:f,timeSince:e=>{let t=new Date,n=(t.getTime()-e.getTime())/1e3;if(n<60)return"Just now";if(n<3600)return"".concat(Math.round(n/60)," minutes ago");if(n<=86400)return"Today";let a=Math.round(n/86400);if(1===a)return"1 day ago";if(a<30)return"".concat(a," days ago");let l=Math.round(a/30);if(1===l)return"1 month ago";if(l<12)return"".concat(l," months ago");let s=Math.round(l/12);return 1===s?"1 year ago":"".concat(s," years ago")},getTextColor:e=>{let t=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),a=parseInt(e.slice(5,7),16),l=(.299*t+.587*n+.114*a)/255;return l>.7?"#000":l>.4?"#777":"#fff"},copiedColor:v,hoveredColor:k,setHoveredColor:y,handleColorBoxClick:(e,t)=>{N(e),g({color:e,paletteId:t}),setTimeout(()=>{g(null)},3e3)},rangesToSendcolorKey:x}};var b=()=>{let{selectedColors:e,selectedNumbers:t,palettes:n,currentCount:o,setCurrentCount:r,colorRanges:i,fetchPalettes:c,handleColorChange:u,handleNumberChange:h,handleFetch:p,handleLikeClick:j,timeSince:b,getTextColor:f,copiedColor:v,hoveredColor:g,setHoveredColor:k,handleColorBoxClick:y,rangesToSendcolorKey:N}=C();return(0,l.useEffect)(()=>{c(N,"number",[4,5,6])},[c,N]),(0,l.useEffect)(()=>{let e=Date.now(),t=()=>{let a=Date.now(),l=a-e;l>2e3&&(l=2e3);let s=l/2e3;r(Math.round(s*n.length)),l<2e3&&requestAnimationFrame(t)};t()},[n.length,r]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s.q,{children:[(0,a.jsx)("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),(0,a.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"}),(0,a.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Noto+Sans+JP:wght@100&display=swap",rel:"stylesheet"})]}),(0,a.jsxs)("div",{className:m().container,children:[(0,a.jsx)(d,{}),(0,a.jsx)(_,{selectedNumbers:t,selectedColors:e,handleNumberChange:h,colorRanges:i,handleColorChange:u,handleFetch:p,currentCount:o}),(0,a.jsx)(x,{palettes:n,getTextColor:f,handleColorBoxClick:y,setHoveredColor:k,copiedColor:v,hoveredColor:g,handleLikeClick:j,timeSince:b})]})]})}},1733:function(e,t,n){"use strict";n.d(t,{V:function(){return a}});let a={palettelist:{$url:e=>({pathname:"/palettelist",hash:null==e?void 0:e.hash})},$url:e=>({pathname:"/",hash:null==e?void 0:e.hash})}},9777:function(e,t,n){"use strict";n.d(t,{x:function(){return o}});var a=n(9239),l=n(7080),s=n(6154);let o=(e=>{let{baseURL:t,fetch:n}=e,a=(void 0===t?"":t).replace(/\/$/,""),s="/color",o="/health",r="/item",i="/like",c="/session",u="/tasks",d="POST",h="DELETE",p="PATCH";return{color:{post:e=>n(a,s,d,e).json(),$post:e=>n(a,s,d,e).json().then(e=>e.body),$path:()=>"".concat(a).concat(s)},health:{get:e=>n(a,o,"GET",e).json(),$get:e=>n(a,o,"GET",e).json().then(e=>e.body),$path:()=>"".concat(a).concat(o)},item:{get:e=>n(a,r,"GET",e).text(),$get:e=>n(a,r,"GET",e).text().then(e=>e.body),post:e=>n(a,r,d,e).json(),$post:e=>n(a,r,d,e).json().then(e=>e.body),$path:()=>"".concat(a).concat(r)},like:{get:e=>n(a,i,"GET",e).text(),$get:e=>n(a,i,"GET",e).text().then(e=>e.body),post:e=>n(a,i,d,e).send(),$post:e=>n(a,i,d,e).send().then(e=>e.body),$path:()=>"".concat(a).concat(i)},me:{get:e=>n(a,"/me","GET",e).json(),$get:e=>n(a,"/me","GET",e).json().then(e=>e.body),$path:()=>"".concat(a).concat("/me")},session:{post:e=>n(a,c,d,e).json(),$post:e=>n(a,c,d,e).json().then(e=>e.body),delete:e=>n(a,c,h,e).json(),$delete:e=>n(a,c,h,e).json().then(e=>e.body),$path:()=>"".concat(a).concat(c)},tasks:{_taskId:e=>{let t="".concat(u,"/").concat(e);return{patch:e=>n(a,t,p,e).send(),$patch:e=>n(a,t,p,e).send().then(e=>e.body),delete:e=>n(a,t,h,e).send(),$delete:e=>n(a,t,h,e).send().then(e=>e.body),$path:()=>"".concat(a).concat(t)}},get:e=>n(a,u,"GET",e).json(),$get:e=>n(a,u,"GET",e).json().then(e=>e.body),post:e=>n(a,u,d,e).json(),$post:e=>n(a,u,d,e).json().then(e=>e.body),$path:e=>"".concat(a).concat(u).concat(e&&e.query?"?".concat((0,l._K)(e.query)):"")},get:e=>n(a,"","GET",e).text(),$get:e=>n(a,"","GET",e).text().then(e=>e.body),$path:()=>"".concat(a)}})((0,a.Z)(s.Z.create({withCredentials:!0})))},1014:function(e){e.exports={header:"Header_header__AF_3G",scrolled:"Header_scrolled__Ik5rI",revealingText:"Header_revealingText__kBRij","reveal-text":"Header_reveal-text__4hOe5"}},9250:function(e){e.exports={container:"palettelist_container__Tn3C8",leftsidebar:"palettelist_leftsidebar___xxDc",targetCount:"palettelist_targetCount__DcHXc",currentCount:"palettelist_currentCount__kNiQo",countLabel:"palettelist_countLabel__JN_nf",paletteNumbers:"palettelist_paletteNumbers__PC0wM",paletteColors:"palettelist_paletteColors__lpWYU",option:"palettelist_option__hf_Xw",colorDisplay:"palettelist_colorDisplay__bc9aK",subtitle:"palettelist_subtitle__avShf",fetchbutton:"palettelist_fetchbutton__FLpb3",mainContent:"palettelist_mainContent__XBRCW",sortButtonsContainer:"palettelist_sortButtonsContainer__smHRv",whiteButton:"palettelist_whiteButton__QdwDp",paletteItem:"palettelist_paletteItem__MYKCu",colorBox:"palettelist_colorBox__Z8WIE",color:"palettelist_color__6F_4s",info:"palettelist_info__SdVEs",likeContainer:"palettelist_likeContainer__Bmjrj",timeContainer:"palettelist_timeContainer__l6HAW"}}},function(e){e.O(0,[263,774,888,179],function(){return e(e.s=6719)}),_N_E=e.O()}]);